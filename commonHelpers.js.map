{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function doFetch(query, page = 1) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '43499454-4c7e954d404e5474a5c884b10';\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15, \n    page: page, \n  };\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    throw new Error('Failed to fetch data');\n  }\n}\n","import { doFetch } from './js/pixabay-api.js';\nimport { createMarkup } from './js/render-functions.js';\nimport './css/styles.css';\nimport axios from 'axios';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  inputText: document.querySelector('input[name=\"searchQuery\"]'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nlet page = 1;\n\nrefs.loadMoreBtn.style.display = 'none';\nrefs.searchForm.addEventListener('submit', onSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  page = 1;\n\n  refs.gallery.innerHTML = '';\n\n  const name = refs.inputText.value.trim();\n\n  if (name !== '') {\n    instance(name);\n  } else {\n    refs.loadMoreBtn.style.display = 'none';\n    return Notiflix.Notify.failure(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n  }\n}\n\nfunction onLoadMore() {\n  const name = refs.inputText.value.trim();\n\n  page += 1;\n\n  instance(name, page);\n}\n\nasync function instance(name, page) {\n  try {\n    const data = await doFetch(name, page);\n    notification(data.hits.length, data.totalHits);\n    createItems(data.hits);\n  } catch (error) {\n    refs.loadMoreBtn.style.display = 'none';\n    Notiflix.Notify.info(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  }\n}\n\nfunction createItems(photos) {\n  const markup = photos\n    .map(\n      item => `<a class =\"photo-link\" href=\"${item.largeImageURL}\">\n    <div class=\"photo-card\">\n        <div class=\"photo\">\n     <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\"/>\n        </div>\n     <div class=\"info\">\n       <p class=\"info-item\">\n         <b>Likes: ${item.likes}</b>\n       </p>\n       <p class=\"info-item\">\n         <b>Views: ${item.views}</b>\n       </p>\n       <p class=\"info-item\">\n         <b>Comments: ${item.comments}</b>\n       </p>\n       <p class=\"info-item\">\n         <b>Downloads: ${item.downloads}</b>\n       </p>\n     </div>\n     </div>\n   </a>`\n    )\n    .join('');\n\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n  simpleLightbox.refresh();\n}\n\nconst simpleLightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction notification(length, totalHits) {\n  if (length === 0) {\n    Notiflix.Notify.failure(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n    return;\n  }\n\n  if (page === 1) {\n    refs.loadMoreBtn.style.display = 'flex';\n\n    Notiflix.Notify.success(`Hooray! We found ${totalHits} images.`);\n  }\n\n  if (page >= Math.ceil(totalHits / 15)) {\n    refs.loadMoreBtn.style.display = 'none';\n    Notiflix.Notify.info(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  }\n}"],"names":["doFetch","query","page","BASE_URL","params","axios","error","refs","onSubmit","onLoadMore","e","name","instance","Notiflix","data","notification","createItems","photos","markup","item","simpleLightbox","SimpleLightbox","length","totalHits"],"mappings":"owBAEO,eAAeA,EAAQC,EAAOC,EAAO,EAAG,CAC7C,MAAMC,EAAW,2BAEXC,EAAS,CACb,IAFc,qCAGd,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACV,EACE,GAAI,CAEF,OADiB,MAAMG,EAAM,IAAIF,EAAU,CAAE,OAAAC,CAAM,CAAE,GACrC,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,uBAAwBA,CAAK,EACrC,IAAI,MAAM,sBAAsB,CACvC,CACH,CCbA,MAAMC,EAAO,CACX,WAAY,SAAS,cAAc,cAAc,EACjD,UAAW,SAAS,cAAc,2BAA2B,EAC7D,QAAS,SAAS,cAAc,UAAU,EAC1C,YAAa,SAAS,cAAc,YAAY,CAClD,EAEA,IAAIL,EAAO,EAEXK,EAAK,YAAY,MAAM,QAAU,OACjCA,EAAK,WAAW,iBAAiB,SAAUC,CAAQ,EACnDD,EAAK,YAAY,iBAAiB,QAASE,CAAU,EAErD,SAASD,EAASE,EAAG,CACnBA,EAAE,eAAc,EAEhBR,EAAO,EAEPK,EAAK,QAAQ,UAAY,GAEzB,MAAMI,EAAOJ,EAAK,UAAU,MAAM,KAAI,EAEtC,GAAII,IAAS,GACXC,EAASD,CAAI,MAEb,QAAAJ,EAAK,YAAY,MAAM,QAAU,OAC1BM,EAAS,OAAO,QACrB,0EACN,CAEA,CAEA,SAASJ,GAAa,CACpB,MAAME,EAAOJ,EAAK,UAAU,MAAM,KAAI,EAEtCL,GAAQ,EAERU,EAASD,EAAMT,CAAI,CACrB,CAEA,eAAeU,EAASD,EAAMT,EAAM,CAClC,GAAI,CACF,MAAMY,EAAO,MAAMd,EAAQW,EAAMT,CAAI,EACrCa,EAAaD,EAAK,KAAK,OAAQA,EAAK,SAAS,EAC7CE,EAAYF,EAAK,IAAI,CACtB,MAAe,CACdP,EAAK,YAAY,MAAM,QAAU,OACjCM,EAAS,OAAO,KACd,4DACN,CACG,CACH,CAEA,SAASG,EAAYC,EAAQ,CAC3B,MAAMC,EAASD,EACZ,IACCE,GAAQ,gCAAgCA,EAAK,aAAa;AAAA;AAAA;AAAA,iBAG/CA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA,qBAIhCA,EAAK,KAAK;AAAA;AAAA;AAAA,qBAGVA,EAAK,KAAK;AAAA;AAAA;AAAA,wBAGPA,EAAK,QAAQ;AAAA;AAAA;AAAA,yBAGZA,EAAK,SAAS;AAAA;AAAA;AAAA;AAAA,QAKlC,EACA,KAAK,EAAE,EAEVZ,EAAK,QAAQ,mBAAmB,YAAaW,CAAM,EAEnDE,EAAe,QAAO,CACxB,CAEA,MAAMA,EAAiB,IAAIC,EAAe,aAAc,CACtD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASN,EAAaO,EAAQC,EAAW,CACvC,GAAID,IAAW,EAAG,CAChBT,EAAS,OAAO,QACd,0EACN,EACI,MACD,CAEGX,IAAS,IACXK,EAAK,YAAY,MAAM,QAAU,OAEjCM,EAAS,OAAO,QAAQ,oBAAoBU,CAAS,UAAU,GAG7DrB,GAAQ,KAAK,KAAKqB,EAAY,EAAE,IAClChB,EAAK,YAAY,MAAM,QAAU,OACjCM,EAAS,OAAO,KACd,4DACN,EAEA"}